var aa=function(){function b(a){this.c=a;this.la=!1;this.ma=null}b.prototype.Vb=function(a){this.ma=a};b.prototype.hb=function(){this.c.setAttribute("class","")};b.prototype.start=function(){this.la=!0};b.prototype.stop=function(){this.la=!1};b.prototype.Ac=function(){this.c.setAttribute("class","hidden")};b.prototype.Lb=function(a){var e=v;this.ma&&this.ma(this,e,a)};return b}(),B=this&&this.Mc||function(b,a){function e(){this.constructor=b}for(var g in a)a.hasOwnProperty(g)&&(b[g]=a[g]);e.prototype=
a.prototype;b.prototype=new e},ba=function(b){function a(e){var g=this;b.call(this,e);this.ob=function(e){if(g.la){if(null!=g.$a){var a=e-g.$a,a=Math.min(a,100);0<a&&(g.update(a),g.Sb())}g.$a=e;g.la&&requestAnimationFrame(g.ob)}else g.$a=null}}B(a,b);a.prototype.start=function(){b.prototype.start.call(this);requestAnimationFrame(this.ob)};a.prototype.stop=function(){b.prototype.stop.call(this)};a.prototype.update=function(){};a.prototype.Sb=function(){};return a}(aa),F=function(){function b(a){this.Ya=
a;this.Sa=this.Cb=this.K=!1;this.wa=!0;this.T=0}b.prototype.N=function(a,e){if(this.M!=a||e)this.M=a,this.T=0};b.prototype.ca=function(){return 0};b.prototype.sa=function(){};b.prototype.oa=function(){return 0};b.prototype.ra=function(){};b.prototype.qa=function(){};b.prototype.na=function(){return null};b.prototype.u=function(){return new C(this.a,this)};b.prototype.Y=function(){};b.prototype.update=function(a,e){this.T+=e;0>=this.a.j&&this.Ia();return null};b.prototype.Ia=function(){this.K=!0};
b.prototype.ib=function(){return this.Cb};b.prototype.Ub=function(){this.Cb=!0};return b}(),H=function(b){function a(e,a,c){b.call(this,e);this.vb=a;this.Ab=c;this.f=this.b=0;this.Na=!1}B(a,b);a.prototype.ca=function(){return this.f};a.prototype.sa=function(e){this.f=e};a.prototype.oa=function(e){return this.b/e};a.prototype.ra=function(e,a){this.b=e*a};a.prototype.qa=function(e){this.Na!=e&&(this.Na=e)};a.prototype.na=function(){return this.vb};a.prototype.u=function(e){var a=this.a,c=a.j+this.f*
e;e=this.b*e/c;var b=this.Ba/c,f;this.Na?f=a.C()-b:f=a.l;a=new G(c,f+e,this.ja,b);a.normalize();return this.Ta(a)};a.prototype.Ca=function(e,a){var c=new G(e,a,this.ja,this.Ba/e);c.normalize();return c};a.prototype.da=function(e,a,c,b){b&&(this.Ba=b);c&&(this.ja=c);this.a=this.Ca(e,a,c,b)};a.prototype.Ta=function(e){return new C(e,this)};a.prototype.update=function(e,a,c){b.prototype.update.call(this,e,a,c);this.Ab&&(this.f-=e.bc/(Math.abs(this.b)+1)*a)};return a}(F),da=function(b){function a(e,a,
c,d){b.call(this,e);this.Ba=a;this.ja=c;this.vb=d;this.Gb=this.Fb=0}B(a,b);a.prototype.Tb=function(e,a){var b;this.Ua=e;this.Va=a;null==b&&(b=this.Ca(e,a));this.a=b};a.prototype.ib=function(){return!0};a.prototype.Ca=function(e,a){var b=Math.sqrt(e*e+a*a),d=this.Ba/b,b=new G(b-this.ja/2,Math.atan2(a,e)-d/2,this.ja,d);b.normalize();return b};a.prototype.u=function(e){var a=this.Ua+e*this.Fb;e=this.Va+e*this.Gb;var b=this.Ca(a,e);return new ca(a,e,b,this)};return a}(F),ea=function(){function b(a,e,
g,b,d,f){this.fc=a;this.ec=e;this.Ra=g;this.zb=b;this.kc=f;this.R=this.S=0;this.ua=this.Ra}b.prototype.update=function(a,e,g,b,d,f,h,k,l){this.S-=a;g&&(this.R-=a,this.ua<this.Ra&&0>=this.R&&(this.ua=this.Ra,this.R+=this.ec));a=null;if(0>=this.S&&0<k.length&&0<this.ua){h=I.rotate(0,h*b,d);a=0;b=I.Ob(b,d);for(g=e=0;0<this.ua&&a<k.length;){f=k[a];var m=I.Ob(f.r,f.Ib);f=this.zc(b.x,b.y,m.x,m.y,h.x,h.y);null!=f&&l.push(f);f=m.x-b.x;var m=m.y-b.y,p=Math.sqrt(f*f+m*m);e+=f/p;g+=m/p;a++}d=I.rotate(e/a*-this.zb,
g/a*-this.zb,-d);a=new I(d.x,d.y);this.S+=this.fc;this.kc()}0>this.R&&(this.R=0);0>this.S&&(this.S=0);return a};b.prototype.zc=function(a,e,g,b,d,f){var h=new J(K,10,10,10,1E3);h.Tb(a,e);a=g-a;e=b-e;b=Math.sqrt(a*a+e*e);h.Fb=d+1*a/b;h.Gb=f+1*e/b;return h};return b}(),C=function(){function b(a,e){this.a=a;this.Wa=e}b.prototype.apply=function(){this.Wa.a=this.a};return b}(),fa=function(){function b(a){var e=this;this.lc=a;this.ma=function(a,b,d){a==e.M&&e.Ka(b,d)}}b.prototype.Ka=function(a,e){var g=
this.lc(a,e);this.N(g)};b.prototype.N=function(a){this.M&&(this.M.Vb(null),this.M.stop(),this.M.Ac());if(this.M=a)a.Vb(this.ma),a.hb(),a.start()};return b}();function ha(b,a,e,g,c,d,f,h,k){this.Fc=b;this.Ea=a;this.jb=e;this.V=g;this.pc=c;this.vc=d;this.W=f;this.qc=h;this.wc=k}
var L=function(b){function a(a,g,c,d){b.call(this,a,g,c);this.$b=d}B(a,b);a.prototype.Ja=function(a){this.ia||(this.ia=!0,this.xa=a,this.$b())};a.prototype.update=function(a,g,c){b.prototype.update.call(this,a,g,c);this.ia?this.Jc():this.fa(a,g,c)};a.prototype.Jc=function(){if(this.wa&&(this.N(a.lb),this.wa=!1,this.Ab=!0,this.xa)){var e=this.na(),g=this.xa.na();if(null!=e&&null!=g){var b=this.ca(),d=(this.b*e+this.xa.oa(b)*b*g)/(e+g);this.f=(b*e+this.xa.ca()*g)/(e+g);this.b=d}else this.b=-this.b,
this.f=-this.f}0>=this.a.j&&this.Ia()};a.prototype.fa=function(){return null};a.lb="dying";return a}(H),ia=function(b){function a(a,g,c,d,f,h){b.call(this,a,g,!1,c);this.Aa=d;this.Xa=f;this.O=h}B(a,b);a.prototype.fa=function(){this.O?this.b=-this.Aa:this.b=this.Aa;this.Xa?this.f=this.Aa:this.f=-this.Aa};a.prototype.Y=function(a,g){a instanceof J?this.Ja(a):g==M?this.O=!1:g==N?this.O=!0:g==P?this.Xa=!0:g==Q&&(this.Xa=!1)};return a}(L),J=function(b){function a(a,g,c,d,f){b.call(this,a,g,c,d);this.ab=
this.cc=f;this.Sa=!0}B(a,b);a.prototype.update=function(a,g,c){b.prototype.update.call(this,a,g,c);this.ab-=g;0>this.ab&&this.Ia()};a.prototype.Y=function(){this.Ia()};return a}(da),ja=function(b){function a(a,g,c,d,f,h,k){b.call(this,a,g,!0,c);this.O=d;this.ub=f;this.ac=h;this.gc=k}B(a,b);a.prototype.fa=function(){this.O?this.b=-this.ub:this.b=this.ub;if(this.a.j<this.gc||this.qb)this.f=this.ac,this.N(a.U,!0);this.qb=!1};a.prototype.Y=function(a,g){a instanceof J?this.Ja(a):g==M?this.O=!1:g==N?this.O=
!0:g==P&&(this.qb=!0)};a.U="flap";return a}(L),S=function(b){function a(a){b.call(this,R);this.hc=a;this.Ub()}B(a,b);return a}(F),ka=function(b){function a(a){b.call(this,a,null,!1);this.Ub()}B(a,b);return a}(H),U=function(b){function a(e,g,c,d,f,h,k,l){b.call(this,e,g,!0,f);this.ka=c;this.rb=d;this.Za=h;this.nc=k;this.mc=l;this.v=!0;this.I={};this.Sa=!0;this.N(a.La);this.ha=0}B(a,b);a.prototype.reset=function(a,g){this.da(a,g);this.f=this.b=0};a.prototype.Z=function(a,g,b,d){var f=this.I[a];null==
f?(f=new la(d,g,b),this.I[a]=f):(f.ea=g,f.ta=b,f.Nb=d)};a.prototype.Da=function(a){delete this.I[a]};a.prototype.Hc=function(){this.I[a.U]=new la(ma,null,null)};a.prototype.uc=function(){delete this.I[a.U]};a.prototype.Y=function(a,b){a.Ya==R?a instanceof S?this.bb=a.hc(this):this.Ja(a):b==P?this.G=!0:b==N?this.P=!0:b==M&&(this.aa=!0)};a.prototype.Ta=function(a){return this.ia?b.prototype.Ta.call(this,a):new na(a,this)};a.prototype.fa=function(e,g,c){b.prototype.fa.call(this,e,g,c);var d=null,f=[],
h;for(h in this.I){var k=this.I[h],l=!1;if(null!=k){var m=e.c.clientWidth,p=e.c.clientHeight;if(!k.pa&&!k.Wb){var n=k.Nb,q=e.gb(m,p);n==ma?l=!0:this.G&&(n==oa||n==T&&k.ta>p/2+this.a.D*q)?l=!0:this.aa&&(n==pa||n==T&&k.ea<m/2)?l=!0:this.P&&(n==qa||n==T&&k.ea>=m/2)?l=!0:n==ra?(this.Ma=Math.atan2(k.ta-p/2,k.ea-m/2),this.ha=0):k.Wb=!0}l?k.pa||(d=k):k.Wb&&(l=e.Qb(k.ea,k.ta),f.push(l),this.Ma=Math.atan2(k.ta-p/2,k.ea-m/2),this.ha=0)}}this.rb&&(k=this.a.X(),c=this.rb.update(g,e,this.G,k,this.a.B(),this.ca(),
this.oa(k),f,c))&&(this.f+=c.r,this.b+=c.Ib);if(this.G){this.N(a.La);this.P?this.v=!0:this.aa&&(this.v=!1);h=this.v?-1:1;c=this.b;if(0<c&&this.v||0>c&&!this.v)c=0;c=Math.abs(c);this.b+=1/(1E3*(c*c*c*7E3+1))*h*g;d&&(this.Za(),this.f=this.ka,d.pa=!0)}else{if(d)this.P?(this.v=!0,this.f=this.ka,this.b=-this.ka,d.pa=!0,this.Za()):this.aa&&(this.v=!1,this.b=this.f=this.ka,d.pa=!0,this.Za());else if(this.aa||this.P)d=this.P?.001:-.001,this.b+=d*g,-.15>this.f&&(this.f=Math.min(-.15,this.f+.02));if(0<this.f)for(h in this.I)if(k=
this.I[h],null!=k&&k.pa){this.f+=4.5E-4*g;break}}this.P||this.aa?(this.N(a.nb),this.Hb||(this.G||this.mc(),this.Hb=!0)):(this.G||this.N(a.mb),this.Hb=!1);this.aa=this.P=this.G=!1;this.ha+=g;this.bb&&(this.nc(),e.Lc(this.bb),this.bb=null)};a.U=-1;a.La="running";a.mb="jumping";a.nb="wall_sliding";return a}(L);function la(b,a,e){this.Nb=b;this.ea=a;this.ta=e}
var sa=function(b){function a(a,g,c,d,f,h,k,l,m){b.call(this,a,g,!0,c);this.Bb=d;this.Xb=f;this.Zb=h;this.wb=k;this.cb=l;this.Yb=m}B(a,b);a.prototype.fa=function(a){null!=this.Oa&&(this.b=this.Oa);if(this.G){var b=a.Bc(),c=!1;a=this.a;var d=a.X();a=a.B();var f=Math.cos(a)*d,d=Math.sin(a)*d;null==this.za&&(this.za=f);null==this.eb&&(this.eb=d);var h;if(b&&0<b.length){var b=b[0].i.a,c=b.X(),b=b.B(),k=Math.sin(b),b=Math.cos(b)*c;h=k*c;c=!0}else b=this.za,h=this.eb;var k=b-f,l=h-d,m=k*k+l*l;m>this.Bb*
this.Bb&&c?(b=this.za,k=b-f,l=b-d,m=k*k+l*l):(this.za=b,this.eb=h);f=Math.sqrt(m);a=I.rotate(k/f,l/f,-a);f=a.x;this.b+=a.y*this.Xb;this.b=Math.max(-this.wb,Math.min(this.wb,this.b));this.f=0>f?this.f+this.cb:this.f+(this.cb+(this.Yb-this.cb)*f)}this.ic=this.b;this.Oa=null;this.G=!1};a.prototype.Y=function(a,b){a instanceof J?this.Ja(a):b==M||b==N?this.Oa=-this.ic*this.Zb:b==P&&(this.G=!0)};return a}(L),ta=function(){function b(a,b){this.i=a;this.Dc=b}b.prototype.u=function(a,b){this.Ha=a;this.Ga=
this.i.u(b-a);this.Mb=G.Ic(this.i.a,this.Ga.a)};return b}();
function ua(b,a,e,g){return function(c,d,f,h,k,l,m){return function(p,n){for(var q=new V(b,n.o,.0014,a,e,6,n.A,n.g),r=f+n.g,t=0,u=l,w=0,z=Math.max(n.g,1),z=Math.max(1,Math.round(r/z)),D=0;t<r;){0!=t&&0==t%z&&(D+=Math.PI);for(var w=t+1,O=Math.max(Math.min(n.g*Math.PI/48+Math.PI/8,Math.PI/w),(k+h)/u),A=0;A<w;){var y=new F(W),x;x=0==t?new G(h,0,l,2*Math.PI):new G(u,2*Math.PI*A/w+O/2+D,h,(2*Math.PI-O*w)/w);x.normalize();y.a=x;q.m(y);var y=g(x.l,x.w(),k,x.J,Math.min(n.g,n.g*t*2/r)),E;for(E in y)q.m(y[E]);
A++}w=k+h+t*(m+2*n.g);u+=w;t++}r=64/u;t=new S(function(a){return{o:a,A:c,g:n.g+d}});t.a=new G(u-w/2,Math.random()*Math.PI*2,64,r);t.a.normalize();q.m(t);n.o.reset(l+h+2,0);q.m(n.o);return q}}}function va(b,a,e,g,c,d){function f(){var b=new ea(300,600,6,.1,1,e),b=new U(K,1,.4,b,g,a,c,d);b.da(600,0,32,24);return b}return function(a,e){if(a==v)return null==e.o&&(e.o=f()),b[e.A](a,e);var g={o:f(),A:"1",g:1};return b[g.A](a,g)}}
function wa(b){return function(a,e,g,c,d){for(var f=[],h=d*Math.random()*2;1<h;){var k=Math.random()*h%5,l;switch(Math.floor(k)){case 0:l=null;break;case 1:var m=new ka(R);l=22+d;m.da(e,a+Math.random()*(c-l/e),l,l);l=m;break;case 2:l=new ja(R,1,b,.5<Math.random(),.06+.01*d,.3,e+g*Math.random()/2);l.da(e+g/2,a+Math.random()*c,24+d,24+d);break;case 3:l=new ia(R,1,b,.05+.02*d,.5<Math.random(),.5<Math.random());l.da(e,a+Math.random()*c,30,30);break;case 4:m=new sa(R,1,b,200+30*d,.1,1.1,.1,.3,.65),l=Math.max(16,
40-d*Math.random()),m.da(e,a+Math.random()*c,l,l),l=m}null!=l&&f.push(l);h-=k}return f}}
function xa(b,a,e,g){return function(c,d,f,h,k,l,m){return function(p,n){var q=new V(b,n.o,.0014,a,e,6,n.A,n.g),r=new F(W);r.a=new G(h,0,m-h,2*Math.PI);q.m(r);for(r=f;0<r;){for(var t=0,u=Math.PI/f,w=2*Math.PI*r/f+u/2,z=m,D=l+n.g,O={};t<D;){t++;var A=w,y=u;if(t==r||20*Math.random()<n.g){var x=new F(W),E=h/z;x.a=new G(z,w,k,E);x.a.normalize();q.m(x);A+=E;y-=E}if(D-t==r||20*Math.random()<n.g)x=new F(W),E=h/z,x.a=new G(z,w+u-E,k,E),x.a.normalize(),q.m(x),y-=E;z+=k;A=g(A,z+h,k,y,Math.min(n.g,t*n.g*2/D));
y=O[t];null==y&&(y=0);100*Math.random()<n.g*(f-y)&&1<t&&(x=new F(W),x.a=new G(z,w+u,h,u),x.a.normalize(),q.m(x),y++,O[t]=y);if(3<100*Math.random()){for(var Y in A)q.m(A[Y]);A=new F(W);A.a=new G(z,w,h,u);A.a.normalize();q.m(A)}z+=h}r--}D=(k+h)*D+m;Y=64/D;r=new S(function(a){return{o:a,A:c,g:n.g+d}});r.a=new G(D,Math.random()*Math.PI*2,64,Y);r.a.normalize();q.m(r);n.o.reset(m+2,0);q.m(n.o);return q}}}
function ya(b,a,e){return function(g,c,d,f,h,k){return function(l,m){var p=new V(b,m.o,.0014,a,e,6,m.A,m.g),n=0,q=new F(W);q.a=new G(1,0,f-1,2*Math.PI);p.m(q);for(q=Math.PI/d;n<d;){n++;var r=new F(W);r.a=new G(f,2*Math.PI*n/d-q,h,k/f);r.a.normalize();p.m(r)}n=64/f;q=new S(function(a){return{o:a,A:g,g:m.g+c}});q.a=new G(f,Math.PI,64,n);q.a.normalize();p.m(q);n=.22+.2*(Math.random()-.5);q=f+200+40*(Math.random()-.5);n=.22557467937469483;q=505.3551623225212;console.log("apx "+n);console.log("r "+q);
m.o.reset(q,0);m.o.b=n;p.m(m.o);return p}}}function za(b,a,e,g,c,d){var f=Aa(),h=Ba("#FFFFAA","rgba(255, 255, 0, 0.7)");return function(k){return k instanceof sa?c:k instanceof ia?g:k instanceof ja?e:k instanceof ka?a:k instanceof S?d:k instanceof U?f:k instanceof J?h:b}}
var ma=0,ra=2,oa=3,pa=4,qa=5,T=6,K=0,R=1,W=2,V=function(b){function a(a,g,c,d,f,h,k,l){var m=this;b.call(this,a);this.H=g;this.bc=c;this.h=d;this.jc=f;this.dc=h;this.L=k;this.$=l;this.F=this.Qa=this.Pa=0;this.s=[];this.Eb=function(a){for(var b in a.changedTouches){var e=a.changedTouches.item(b);m.Z(e.identifier,e.clientX,e.clientY,!0)}a.stopPropagation()};this.ba=function(a){for(var b in a.changedTouches){var e=a.changedTouches.item(b);m.Da(e.identifier)}a.stopPropagation()};this.Db=function(a){for(var b in a.changedTouches){var e=
a.changedTouches.item(b);m.Z(e.identifier,e.clientX,e.clientY,!0)}a.stopPropagation()};var p=!1;this.xb=function(a){m.Z(0,a.clientX,a.clientY,!1);p=!0;a.stopPropagation()};this.yb=function(a){p?m.Z(0,a.clientX,a.clientY,!1):m.Z(0,a.clientX,a.clientY,!1,!1);a.stopPropagation()};this.ya=function(a){m.Da(0);p=!1;a.stopPropagation()};var n={};this.sb=function(a){n[a.keyCode]||(n[a.keyCode]=!0,m.H.Hc());a.stopPropagation()};this.tb=function(a){if(n[a.keyCode]){delete n[a.keyCode];var b=!1,e;for(e in n)if(n[e]){b=
!0;break}b||m.H.uc()}a.stopPropagation()}}B(a,b);a.prototype.hb=function(){b.prototype.hb.call(this);var a=window.localStorage.getItem(this.$+"-"+this.L);a&&(this.va=parseInt(a))};a.prototype.Bc=function(){return this.s[K]};a.prototype.Gc=function(a,b){this.Qa=a;this.Pa=b};a.prototype.Qb=function(a,b){var c=this.c.clientWidth,d=this.c.clientHeight,f=this.Qa,h=this.Pa,k=f*Math.cos(h),f=f*Math.sin(h),l=this.gb(c,d),c=I.rotate((a-c/2)*l,(b-d/2)*l,h+Math.PI/2),k=k+c.x,f=f+c.y;return new I(Math.sqrt(k*
k+f*f),Math.atan2(f,k))};a.prototype.Z=function(a,b,c,d,f){void 0===f&&(f=!0);this.H.K?f&&this.Lb({g:this.$,A:this.L}):this.H.Z(a,b,c,d?T:f?1:ra)};a.prototype.Da=function(a){this.H.Da(a)};a.prototype.start=function(){b.prototype.start.call(this);var a=window.location.hash,g=this.$+"-"+this.L;if(0==this.F){var c="s-"+g,d=parseInt(window.localStorage.getItem(c));d?d++:d=1;this.pb=d;window.localStorage.setItem(c,""+d);window.ga&&ga("send","pageview",{page:g})}g="#"+g;a!=g&&(g=window.location.href.substr(0,
window.location.href.length-a.length)+g,c={A:this.L,g:this.$},null!=a&&""!=a?window.history.replaceState(c,this.L,g):window.history.pushState(c,this.L,g));"ontouchstart"in window||window.DocumentTouch?(this.c.addEventListener("touchstart",this.Eb),this.c.addEventListener("touchmove",this.Db),this.c.addEventListener("touchend",this.ba),this.c.addEventListener("touchleave",this.ba),this.c.addEventListener("touchcancel",this.ba)):(this.c.addEventListener("mousedown",this.xb),this.c.addEventListener("mouseup",
this.ya),this.c.addEventListener("mousemove",this.yb),this.c.addEventListener("mouseout",this.ya));window.addEventListener("keydown",this.sb);window.addEventListener("keyup",this.tb)};a.prototype.stop=function(){b.prototype.stop.call(this);this.c.removeEventListener("touchstart",this.Eb);this.c.removeEventListener("touchmove",this.Db);this.c.removeEventListener("touchend",this.ba);this.c.removeEventListener("touchleave",this.ba);this.c.removeEventListener("touchcancel",this.ba);this.c.removeEventListener("mousedown",
this.xb);this.c.removeEventListener("mouseup",this.ya);this.c.removeEventListener("mousemove",this.yb);this.c.removeEventListener("mouseout",this.ya);window.removeEventListener("keydown",this.sb);window.removeEventListener("keyup",this.tb)};a.prototype.m=function(a){for(var b=a.Ya;this.s.length<=b;)this.s.push([]);var b=this.s[b],c=this.jc(a);a=new ta(a,c);b.push(a);return a};a.prototype.update=function(a){this.H.K||this.H.ia||(this.F+=a);this.Kc(a);if(this.la){var b=this.tc(a);this.Ec(a,b);this.oc()}};
a.prototype.Ec=function(a,b){for(var c=0;c<b.length;){var d=b[c],f=d.V.i,h=d.W.i,k=f.na(),l=h.na(),m,p;if(d.Fc||null==k&&null==l)p=m=X;else{var n=d.jb.X(),q=f.ca(),r=h.ca(),t=f.oa(n),u=h.oa(n);p=r-q;var w=u-t;m=this.Jb(p,w,d.vc.a,d.jb);p=this.Jb(-p,-w,d.wc.a,d.jb);if(m==-p&&m!=X){m==Q||m==P?null==k?h.sa(q):null==l?f.sa(r):(n=(r*l+q*k)/(k+l),h.sa(n),f.sa(n)):null==k?h.ra(t,n):null==l?f.ra(u,n):(k=(u*l+t*k)/(k+l),h.ra(k,n),f.ra(k,n));for(n=c+1;n<b.length;)k=b[n],k.V==d.V||k.V==d.W||k.W==d.V||k.W==d.W?
b.splice(n,1):n++;m==M?f.qa(!1):m==N&&f.qa(!0);p==M?h.qa(!1):p==N&&h.qa(!0);d.pc.apply(this);d.qc.apply(this);d.V.u(d.Ea,a);d.W.u(d.Ea,a);this.fb(a,b,d.V,this.s.length);this.fb(a,b,d.W,this.s.length)}else console.log("unmatched or undefined edges falling through!"),p=m=X}f.Y(h,m);h.Y(f,p);c++}};a.prototype.Jb=function(a,b,c,d){var f=d.yc(c.j);c=d.xc(c.l);return(f?d.Pb():d.Cc())<d.D||f&&0>=a||!f&&0<=a?c?0<b?M:X:0>b?N:X:f?P:Q};a.prototype.fb=function(a,b,c,d){var f=c.i;if(f.wa&&!f.K)for(;0<d;)if(d--,
d!=f.Ya)for(var h=this.s[d],k=h.length;0<k;){k--;var l=h[k],m=l.i;if(m.wa&&!m.K&&(l=this.sc(a,c,l),null!=l)){for(m=0;m<b.length&&!(b[m].Ea>l.Ea);)m++;b.splice(m,0,l)}}};a.prototype.tc=function(a){for(var b=[],c=this.s.length;0<c;){c--;for(var d=this.s[c],f=d.length;0<f;)f--,this.fb(a,b,d[f],c)}return b};a.prototype.Kb=function(a,b){var c=1;if(b.i.Sa)for(var d=!1;!d;)b.i.u(a/c).a.kb(b.i.a)?d=!0:c++;return c};a.prototype.sc=function(a,b,c){var d=b.Ga,f=c.Ga;if(null!=d&&null!=f){var h=b.i,k=c.i,l,m,
p;if(b.Mb.kb(c.Mb)){var n=this.Kb(a,b),q=this.Kb(a,c),n=Math.max(n,q);if(1<n)for(q=1,d=null;q<=n;){var r=a*q/n,t=h.u(r),u=k.u(r),d=G.Fa(t.a,u.a);if(null!=d){m=t;p=u;l=r;break}q++}else m=d,p=f,l=a,d=G.Fa(m.a,p.a)}else d=null;if(null!=d)if(b.i.ib()||c.i.ib()||b.i.a.kb(c.i.a))b=new ha(!0,a,d,b,m,p,c,f,f);else{a=0;f=Math.max(b.Ha,c.Ha);h=d;for(d=k=null;a<this.dc;)n=(f+l)/2,q=b.i.u(n),r=c.i.u(n),t=G.Fa(q.a,r.a),null!=t?(l=n,h=t,m=q,p=r):(f=n,k=q,d=r),a++;null==k&&null==d&&(k=b.i.u(f-b.Ha),d=c.i.u(f-c.Ha));
b=new ha(!1,f,h,b,k,m,c,d,p)}else b=null}else b=null;return b};a.prototype.Kc=function(a){var b=[],c;for(c in this.s)for(var d=this.s[c],f=d.length;0<f;){f--;var h=d[f],k=h.i;k.update(this,a,b);k.K?d.splice(f,1):h.u(0,a)}for(c in b)d=b[c],f=this.m(d),d.update(this,a,b),f.u(0,a)};a.prototype.oc=function(){for(var a in this.s){var b=this.s[a],c;for(c in b){var d=b[c].Ga;null!=d&&d.apply(this)}}};a.prototype.toTimeString=function(a){var b=Math.floor(a/1E3);a=Math.floor(b/60);for(b=""+b%60;2>b.length;)b=
"0"+b;return a+":"+b};a.prototype.gb=function(a,b){return Math.min(1,a/600,b/500)};a.prototype.Sb=function(){var a=this.c.clientWidth,b=this.c.clientHeight,c=Math.floor(Math.min(b/20,a/20));this.h.font="bold "+c+"px Courier";this.h.fillStyle="#000000";this.h.fillRect(0,0,a,b);this.h.save();var d=this.Qa,f=this.Pa,h=-d*Math.cos(f),d=-d*Math.sin(f),k=this.gb(a,b);this.h.translate(a/2,b/2);this.h.rotate(-f-Math.PI/2);this.h.scale(k,k);this.h.translate(h,d);for(f=this.s.length;0<f;)for(f--,h=this.s[f],
d=h.length;0<d;){d--;var l=h[d],k=l.i;k.K||(l=l.Dc,l(this.h,k))}this.h.restore();this.h.fillStyle="#FFFFFF";f=""+this.$+"-"+this.L;this.h.fillText(f+" "+this.toTimeString(this.F),c,1.5*c);var m;this.va?m="BEST "+this.toTimeString(this.va):m="Unbeaten!";this.h.fillText(m,a-this.h.measureText(m).width-c,c+c/2);c=Math.floor(Math.min(b/15,a/15));this.h.font="bold "+c+"px Courier";this.pb&&2E3>this.F&&(1E3<this.F&&(this.h.globalAlpha=2*(2E3-this.F)/2E3),m="World "+f,f=this.h.measureText(m),this.h.fillText(m,
(a-f.width)/2,(b+c)/2-c),m="Attempt "+this.pb,f=this.h.measureText(m),this.h.fillText(m,(a-f.width)/2,(b+c)/2+1.5*c),this.h.globalAlpha=1);if(this.H.K||this.H.ia)m="GAME OVER",f=this.h.measureText(m),this.h.fillText(m,(a-f.width)/2,(b+c)/2)};a.prototype.Lc=function(a){(null==this.va||this.va>this.F)&&window.localStorage.setItem(this.$+"-"+this.L,""+this.F);this.Lb(a)};return a}(ba),na=function(b){function a(a,g){b.call(this,a,g)}B(a,b);a.prototype.apply=function(a){b.prototype.apply.call(this,a);
var g=this.a;a.Gc(g.w(),g.B())};return a}(C),ca=function(){function b(a,b,g,c){this.Ua=a;this.Va=b;this.a=g;this.Wa=c}b.prototype.apply=function(){this.Wa.Tb(this.Ua,this.Va)};return b}(),G=function(){function b(a,b,g,c){this.j=a;this.l=b;this.D=g;this.J=c}b.Nc=function(a,b){for(;b>a+Math.PI;)b-=2*Math.PI;for(;b<a-Math.PI;)b+=2*Math.PI;return b>a};b.U=function(a){for(;0>a;)a+=2*Math.PI;return a%(2*Math.PI)};b.Fa=function(a,e){var g=a.Rb(),c=e.Rb(),d;for(d in g){var f=g[d],h;for(h in c){var k=b.rc(f,
c[h]);if(null!=k)return k.normalize(),k}}return null};b.rc=function(a,e){var g=a.w(),c=a.l,d=a.C(),f=e.w(),h=e.l,k=e.C(),l=Math.max(a.j,e.j),g=Math.min(g,f)-l;return 0<g?(c=Math.max(c,h),d=Math.min(d,k)-c,0<d?new b(l,c,g,d):null):null};b.Ic=function(a,e){var g=Math.min(a.j,e.j),c=Math.min(a.l,e.l),d=Math.max(a.w(),e.w()),f=Math.max(a.C(),e.C());return new b(g,c,d-g,f-c)};b.prototype.yc=function(a){return this.j<=a&&this.j+this.D>a};b.prototype.xc=function(a){a=b.U(a);return this.l<=a&&this.l+this.J>
a};b.prototype.w=function(){return this.j+this.D};b.prototype.X=function(){return this.j+this.D/2};b.prototype.C=function(){return this.l+this.J};b.prototype.B=function(){return this.l+this.J/2};b.prototype.Pb=function(){return this.w()*this.J};b.prototype.Cc=function(){return this.j*this.J};b.prototype.normalize=function(){this.l=b.U(this.l)};b.prototype.Rb=function(){var a=[this];this.C()>2*Math.PI&&a.push(new b(this.j,this.l-2*Math.PI,this.D,this.J));return a};b.prototype.kb=function(a){return null!=
b.Fa(this,a)};return b}(),Q=-1,M=-2,P=1,N=2,X=0,I=function(){function b(a,b){this.r=a;this.Ib=b}b.Ob=function(a,b){return{x:Math.cos(b)*a,y:Math.sin(b)*a}};b.Qb=function(a,e){return new b(Math.sqrt(a*a+e*e),Math.atan2(e,a))};b.rotate=function(a,b,g){var c=Math.sin(g);g=Math.cos(g);return{x:a*g-b*c,y:a*c+b*g}};return b}();
function Ca(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var g=e.a,c=e.T%3E3,c=Math.abs(c-1500),d=1+c/3E3,c=2-c/1500,f=g.B(),h=g.l,h=f+(h-f)*d,k=Math.sin(h),h=Math.cos(h),l=g.C(),l=f+(l-f)*d,d=Math.sin(l),l=Math.cos(l),m=Math.sin(f),f=Math.cos(f),p=g.X(),n=g.j,n=p+(n-p)*c,g=g.w(),g=p+(g-p)*c;0<n&&(a.beginPath(),a.moveTo(h*p,k*p),a.lineTo(f*n,m*n),a.lineTo(l*p,d*p),a.lineTo(f*g,m*g),a.closePath(),a.fill(),a.stroke())}}
function Da(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;for(var g=e.a,c=e.T%500/1500,d=1/3,f=0;3>f;){var h=c+d*f;f++;a.globalAlpha=Math.max(0,1-h*h);var k=g.J,l=g.B(),m=l-k*h,k=l+k*h,l=Math.sin(m),p=Math.cos(m),n=Math.sin(k),q=Math.cos(k),r=g.X(),t=g.D,u=r-t*h,h=r+t*h;0<u&&(a.beginPath(),a.moveTo(p*h,l*h),a.arc(0,0,h,m,k,!1),a.lineTo(q*u,n*u),a.arc(0,0,u,k,m,!0),a.closePath(),a.stroke())}a.globalAlpha=1}}
function Ea(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var g=e.a,c=g.B(),d=e.T,f;f=200>d?d/200:1;var h=g.l,h=c+(h-c)*f,d=Math.sin(h),h=Math.cos(h),k=g.C(),k=c+(k-c)*f,c=Math.sin(k);f=Math.cos(k);k=g.j;g=g.w();0<k&&(a.beginPath(),a.moveTo(h*g,d*g),a.lineTo(h*k,d*k),a.lineTo(f*k,c*k),a.lineTo(f*g,c*g),a.closePath(),a.fill(),a.stroke())}}
function Fa(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var g=e.a,c=g.l,d=Math.sin(c),f=Math.cos(c),h=g.C(),k=Math.sin(h),l=Math.cos(h),m=g.j,g=g.w();0<m&&(a.beginPath(),a.moveTo(f*g,d*g),a.arc(0,0,g,c,h,!1),a.lineTo(l*m,k*m),a.arc(0,0,m,h,c,!0),a.closePath(),a.fill(),a.stroke())}}
function Aa(){return function(b,a){b.strokeStyle="#FFFFFF";b.fillStyle="rgba(255, 0, 0, 1)";b.lineWidth=2;var e=a.a,g=e.j;if(0<g){var c=e.B(),d=Math.cos(c)*g,f=Math.sin(c)*g,h=e.Pb(),k=e.D,l,m=a.M,p=a.T;m==U.La&&1E-4<Math.abs(a.b)?(e=300/Math.abs(a.b),g=p%e,g>e/2&&(g=e-g),l=2*g/e):l=0;var n=.2*h,q=.2*h,e=.2*h,g=.3*h;m==U.lb&&(c+=p*Math.PI*2/500);b.save();b.translate(d,f);b.rotate(c+Math.PI/2);a.v&&b.scale(-1,1);c=(h/2-n)*l+n;d=h-c-h/2;c-=h/2;p=m==U.mb?Math.PI/6*Math.min(1,p/200):0;b.save();b.translate(c,
-q);b.rotate(p);b.beginPath();b.moveTo(-n/2,2*-q);b.lineTo(-n/2,q);b.lineTo(n/2,q);b.lineTo(n/2,-q);b.fill();b.stroke();b.restore();b.save();b.translate(d,-q);b.rotate(-p);b.beginPath();b.moveTo(-n/2,-q);b.lineTo(-n/2,q);b.lineTo(n/2,q);b.lineTo(n/2,-q);b.fill();b.stroke();b.restore();b.beginPath();b.moveTo(-h/2,-k);b.lineTo(-h/2,-q);b.lineTo(h/2,-q);b.lineTo(h/2,-k);b.closePath();b.fill();b.stroke();c=.75*-k;d=.1*h;f=.1*-h+2*d*(1+l);p=f-1.5*d;f+=1.5*d;b.fillStyle="#FFFFFF";b.save();b.translate(p,
c);b.scale(1,1.4);b.beginPath();b.arc(0,0,d,0,2*Math.PI);b.fill();b.restore();m==U.nb?(b.moveTo(f-d,c),b.lineTo(f+d,c),b.stroke()):(b.save(),b.translate(f,c),b.scale(1,1.2),b.beginPath(),b.arc(0,0,d,0,2*Math.PI),b.fill(),b.restore());h=.25*-h;k=.55*-k;l=(1-l)*(a.v?-Math.PI/3:Math.PI/3);null!=a.Ma&&1E3>a.ha&&(l=-a.Ma+Math.PI/2);b.save();b.translate(h,k);a.v?b.rotate(l):b.rotate(-l);((h=l<Math.PI&&0<l)&&a.v||!h&&!a.v)&&b.scale(-1,1);h=2*e;k=3*e;b.beginPath();b.moveTo(h/2,g-e/2);b.lineTo(h/2,g-e/2+k);
b.lineTo(h/2-e,g-e/2+k);b.lineTo(h/2-e,g-e/2+e);b.lineTo(-h/2,g-e/2+e);b.lineTo(-h/2,g-e/2);b.closePath();b.fillStyle="rgba(128, 128, 0, 1)";b.fill();b.stroke();b.beginPath();b.moveTo(e/2,0);b.lineTo(e/2,g-e/2);b.bezierCurveTo(e/2,g,-e/2,g,-e/2,g-e/2);b.lineTo(-e/2,0);b.fillStyle="rgba(255, 0, 0, 1)";b.fill();b.stroke();b.restore();b.restore()}}}
function Ba(b,a){return function(e,g){e.strokeStyle=b;e.fillStyle=a;e.lineWidth=2;var c=g.a,d=c.B(),f=Math.cos(c.l),h=Math.sin(d),d=Math.cos(d),k=c.X(),l=c.w();0<c.j&&(c=Math.max(Math.abs(f*k-d*k),Math.abs(l-k)),e.beginPath(),e.arc(d*k,h*k,c,0,2*Math.PI),e.closePath(),e.fill(),e.stroke())}}
function Ga(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var g=e.a,c=g.l,d=Math.sin(c),f=Math.cos(c),h=g.C(),k=Math.sin(h),l=Math.cos(h),m=g.B(),p=Math.sin(m),m=Math.cos(m),n=g.j,q=g.w();0<n&&(a.beginPath(),a.moveTo(f*n,d*n),a.lineTo(m*(q+g.D/2),p*q),a.lineTo(l*n,k*n),a.arc(0,0,n,h,c,!0),a.closePath(),a.fill(),a.stroke())}}
function Ha(b,a){for(var e=.35*b.sampleRate,g=b.createBuffer(1,e,b.sampleRate),c=g.getChannelData(0),d=0;d<e;d++)c[d]=2*Math.random()-1;return function(){var c=b.currentTime,e=.35+.1*(Math.random()-.5),d=b.createBufferSource();d.buffer=g;d.loop=!0;var l=b.createBiquadFilter();l.type="lowpass";l.Q.value=1;l.frequency.value=600+200*Math.random();var m=b.createGain();m.gain.value=0;m.gain.setValueAtTime(0,c);m.gain.linearRampToValueAtTime(.4+.1*Math.random(),c+.002*e);m.gain.linearRampToValueAtTime(.1+
.05*Math.random(),c+.2*e+.05*Math.random());m.gain.linearRampToValueAtTime(0,c+e);d.connect(l);l.connect(m);m.connect(b.destination);setTimeout(function(){l.disconnect();d.disconnect();d.stop()},1E3*e);d.start();a&&a()}}
function Z(b,a,e,g,c,d,f,h,k,l){void 0===l&&(l=1);return function(){var m=b.currentTime,p=b.createOscillator();p.frequency.setValueAtTime(Math.max(1,e+Math.random()*c),m);p.frequency.linearRampToValueAtTime(Math.max(1,g+Math.random()*c),m+k);p.type=a;var n=b.createGain();n.gain.value=0;n.gain.setValueAtTime(0,m);n.gain.linearRampToValueAtTime(.2*l,m+d);n.gain.linearRampToValueAtTime(.1*l,m+f);n.gain.linearRampToValueAtTime(.1*l,m+h);n.gain.linearRampToValueAtTime(0,m+k);p.connect(n);n.connect(b.destination);
p.start();setTimeout(function(){p.stop()},1E3*k)}}
function Ia(b,a,e,g,c){return function(){var d=b.currentTime,f=b.createOscillator();f.frequency.setValueAtTime(a,d);f.frequency.linearRampToValueAtTime(e,d+c);f.type="square";f.start();var h=b.createGain();h.gain.value=0;h.gain.setValueAtTime(.2,d);h.gain.linearRampToValueAtTime(.1,d+.1*c);h.gain.linearRampToValueAtTime(.1,d+.2*c);h.gain.linearRampToValueAtTime(0,d+c);var k=b.createOscillator();k.frequency.value=g/c;k.type="sawtooth";k.start();var l=b.createGain();l.gain.value=-1E3;f.connect(h);k.connect(l);
l.connect(f.detune);h.connect(b.destination);setTimeout(function(){f.disconnect();h.disconnect();l.disconnect();f.stop();k.stop()},1E3*c)}}var v=1;
window.onload=function(){function b(){var a=window.location.hash,b;if(a)if(a=a.substr(1),localStorage.getItem("s-"+a)){var c=a.split("-"),a=parseInt(c[0]),c=c[1];a&&c&&(b={o:null,g:a,A:c},r=v)}else b=null;return b}var a=document.getElementById("canvas"),e;window.AudioContext?e=new AudioContext:window.webkitAudioContext&&(e=new webkitAudioContext);var g=Z(e,"sawtooth",250,1E3,200,.01,.08,.12,.3),c=Ha(e,Z(e,"square",600,100,100,0,.035,.04,.2,.6)),d=Ia(e,200,10,6,.7),f=Z(e,"square",250,-150,100,0,.05,
.1,.2,.5),h=Z(e,"sawtooth",150,-100,100,.01,.05,.1,.3);e=Ia(e,600,1E3,14,.8);a.setAttribute("width",""+document.body.clientWidth+"px");a.setAttribute("height",""+document.body.clientHeight+"px");var k=a.getContext("2d"),l=k.createRadialGradient(0,0,0,0,0,1500);l.addColorStop(0,"rgba(0, 0, 0, 0.5)");l.addColorStop(.2,"rgba(255, 0, 255, 0.5)");l.addColorStop(.32,"rgba(255, 0, 0, 0.5)");l.addColorStop(.44,"rgba(255, 255, 0, 0.5)");l.addColorStop(.56,"rgba(0, 255, 0, 0.5)");l.addColorStop(.68,"rgba(0, 255, 255, 0.5)");
l.addColorStop(.8,"rgba(0, 0, 255, 0.6)");l.addColorStop(.92,"rgba(255, 255, 255, 0.7)");l.addColorStop(1,"rgba(255, 255, 255, 0)");var l=za(Fa(l),Ga(l),Ea(l),Ca(l),Ba("#FFFFFF",l),Da(l)),h=wa(h),m=xa(a,k,l,h),p=ya(a,k,l),n={};n["1"]=ua(a,k,l,h)("2",0,6,20,70,300,5);n["2"]=m("1",1,8,20,100,6,300);n["3"]=p("1",1,8,300,300,10);var q=new fa(va(n,g,c,d,e,f)),a=b(),r;null==a?r=0:window.history.replaceState(null,null,window.location.href.substr(0,window.location.href.length-window.location.hash.length));
q.Ka(r,a);window.onpopstate=function(a){a=a.state;null==a&&(a=b());a?q.Ka(v,a):q.Ka(0,null)}};
