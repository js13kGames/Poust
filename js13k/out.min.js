var aa=function(){function b(a){this.c=a;this.ma=!1;this.na=null}b.prototype.Wb=function(a){this.na=a};b.prototype.ib=function(){this.c.setAttribute("class","")};b.prototype.start=function(){this.ma=!0};b.prototype.stop=function(){this.ma=!1};b.prototype.Cc=function(){this.c.setAttribute("class","hidden")};b.prototype.Ob=function(a){var e=v;this.na&&this.na(this,e,a)};return b}(),A=this&&this.Pc||function(b,a){function e(){this.constructor=b}for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);e.prototype=
a.prototype;b.prototype=new e},ba=function(b){function a(e){var c=this;b.call(this,e);this.qb=function(e){if(c.ma){if(null!=c.$a){var a=e-c.$a,a=Math.min(a,100);0<a&&(c.update(a),c.Ub())}c.$a=e;c.ma&&requestAnimationFrame(c.qb)}else c.$a=null}}A(a,b);a.prototype.start=function(){b.prototype.start.call(this);requestAnimationFrame(this.qb)};a.prototype.stop=function(){b.prototype.stop.call(this)};a.prototype.update=function(){};a.prototype.Ub=function(){};return a}(aa),F=function(){function b(a){this.Ya=
a;this.Sa=this.Eb=this.K=!1;this.xa=!0;this.N=0}b.prototype.P=function(a,e){if(this.M!=a||e)this.M=a,this.N=0};b.prototype.da=function(){return 0};b.prototype.ta=function(){};b.prototype.pa=function(){return 0};b.prototype.sa=function(){};b.prototype.qa=function(){};b.prototype.oa=function(){return null};b.prototype.u=function(){return new C(this.a,this)};b.prototype.O=function(){};b.prototype.update=function(a,e){this.N+=e;0>=this.a.i&&this.Ja();return null};b.prototype.Ja=function(){this.K=!0};
b.prototype.jb=function(){return this.Eb};b.prototype.mb=function(){this.Eb=!0};return b}(),H=function(b){function a(e,c,a){b.call(this,e);this.xb=c;this.Cb=a;this.f=this.b=0;this.Na=!1}A(a,b);a.prototype.da=function(){return this.f};a.prototype.ta=function(e){this.f=e};a.prototype.pa=function(e){return this.b/e};a.prototype.sa=function(e,c){this.b=e*c};a.prototype.qa=function(e){this.Na!=e&&(this.Na=e)};a.prototype.oa=function(){return this.xb};a.prototype.u=function(e){var c=this.a,a=c.i+this.f*
e;e=this.b*e/a;var b=this.Ca/a,g;this.Na?g=c.D()-b:g=c.l;c=new G(a,g+e,this.ka,b);c.normalize();return this.Ta(c)};a.prototype.Da=function(e,a){var b=new G(e,a,this.ka,this.Ca/e);b.normalize();return b};a.prototype.fa=function(e,a,b,d){d&&(this.Ca=d);b&&(this.ka=b);this.a=this.Da(e,a,b,d)};a.prototype.Ta=function(e){return new C(e,this)};a.prototype.update=function(e,a,f){b.prototype.update.call(this,e,a,f);this.Cb&&(this.f-=e.dc/(Math.abs(this.b)+1)*a)};return a}(F),da=function(b){function a(e,a,
f,d){b.call(this,e);this.Ca=a;this.ka=f;this.xb=d;this.Ib=this.Hb=0}A(a,b);a.prototype.Vb=function(e,a){var b;this.Ua=e;this.Va=a;null==b&&(b=this.Da(e,a));this.a=b};a.prototype.jb=function(){return!0};a.prototype.Da=function(e,a){var b=Math.sqrt(e*e+a*a),d=this.Ca/b,b=new G(b-this.ka/2,Math.atan2(a,e)-d/2,this.ka,d);b.normalize();return b};a.prototype.u=function(e){var a=this.Ua+e*this.Hb;e=this.Va+e*this.Ib;var b=this.Da(a,e);return new ca(a,e,b,this)};return a}(F),ea=function(){function b(a,e,
c,b,d,g){this.hc=a;this.gc=e;this.Ra=c;this.Bb=b;this.mc=g;this.T=this.U=0;this.va=this.Ra}b.prototype.update=function(a,e,c,b,d,g,k,h,l){this.U-=a;c&&(this.T-=a,this.va<this.Ra&&0>=this.T&&(this.va=this.Ra,this.T+=this.gc));a=null;if(0>=this.U&&0<h.length&&0<this.va){k=I.rotate(0,k*b,d);a=0;b=I.Rb(b,d);for(c=e=0;0<this.va&&a<h.length;){g=h[a];var m=I.Rb(g.r,g.Kb);g=this.Bc(b.x,b.y,m.x,m.y,k.x,k.y);null!=g&&l.push(g);g=m.x-b.x;var m=m.y-b.y,p=Math.sqrt(g*g+m*m);e+=g/p;c+=m/p;a++}d=I.rotate(e/a*-this.Bb,
c/a*-this.Bb,-d);a=new I(d.x,d.y);this.U+=this.hc;this.mc()}0>this.T&&(this.T=0);0>this.U&&(this.U=0);return a};b.prototype.Bc=function(a,e,c,b,d,g){var k=new J(K,10,10,10,1E3);k.Vb(a,e);a=c-a;e=b-e;b=Math.sqrt(a*a+e*e);k.Hb=d+1*a/b;k.Ib=g+1*e/b;return k};return b}(),C=function(){function b(a,e){this.a=a;this.Wa=e}b.prototype.apply=function(){this.Wa.a=this.a};return b}(),fa=function(){function b(a){var e=this;this.nc=a;this.na=function(a,b,d){a==e.M&&e.Ka(b,d)}}b.prototype.Ka=function(a,e){var c=
this.nc(a,e);this.P(c)};b.prototype.P=function(a){this.M&&(this.M.Wb(null),this.M.stop(),this.M.Cc());if(this.M=a)a.Wb(this.na),a.ib(),a.start()};return b}();function ha(b,a,e,c,f,d,g,k,h){this.Ic=b;this.Fa=a;this.kb=e;this.W=c;this.rc=f;this.xc=d;this.X=g;this.sc=k;this.yc=h}
var L=function(b){function a(e,a,f,d){b.call(this,e,a,f);this.ac=d}A(a,b);a.prototype.ra=function(e){this.ja||(this.ja=!0,this.ya=e,this.ac())};a.prototype.update=function(e,a,f){b.prototype.update.call(this,e,a,f);this.ja?this.Mc():this.ha(e,a,f)};a.prototype.Mc=function(){if(this.xa&&(this.P(a.nb),this.xa=!1,this.Cb=!0,this.ya)){var e=this.oa(),c=this.ya.oa();if(null!=e&&null!=c){var b=this.da(),d=(this.b*e+this.ya.pa(b)*b*c)/(e+c);this.f=(b*e+this.ya.da()*c)/(e+c);this.b=d}else this.b=-this.b,
this.f=-this.f}0>=this.a.i&&this.Ja()};a.prototype.ha=function(){return null};a.nb="dying";return a}(H),ia=function(b){function a(a,c,f,d,g,k){b.call(this,a,c,!1,f);this.Ba=d;this.Xa=g;this.R=k}A(a,b);a.prototype.ha=function(){this.R?this.b=-this.Ba:this.b=this.Ba;this.Xa?this.f=this.Ba:this.f=-this.Ba};a.prototype.O=function(a,c){a instanceof J?this.ra(a):c==M?this.R=!1:c==N?this.R=!0:c==O?this.Xa=!0:c==P&&(this.Xa=!1)};return a}(L),J=function(b){function a(a,c,f,d,g){b.call(this,a,c,f,d);this.ab=
this.ec=g;this.Sa=!0}A(a,b);a.prototype.update=function(a,c,f){b.prototype.update.call(this,a,c,f);this.ab-=c;0>this.ab&&this.Ja()};a.prototype.O=function(){this.Ja()};return a}(da),ja=function(b){function a(a,c,f,d){b.call(this,a,c,!1,f);this.cc=d;this.mb()}A(a,b);a.prototype.O=function(a){a instanceof J&&this.ra(a)};return a}(L),ka=function(b){function a(a,c,f,d,g,k,h){b.call(this,a,c,!0,f);this.R=d;this.wb=g;this.bc=k;this.ic=h}A(a,b);a.prototype.ha=function(){this.R?this.b=-this.wb:this.b=this.wb;
if(this.a.i<this.ic||this.sb)this.f=this.bc,this.P(a.V,!0);this.sb=!1};a.prototype.O=function(a,c){a instanceof J?this.ra(a):c==M?this.R=!1:c==N?this.R=!0:c==O&&(this.sb=!0)};a.V="flap";return a}(L),S=function(b){function a(a){b.call(this,R);this.jc=a;this.mb()}A(a,b);return a}(F),la=function(b){function a(a){b.call(this,a,null,!1);this.mb()}A(a,b);return a}(H),U=function(b){function a(e,c,f,d,g,k,h,l){b.call(this,e,c,!0,g);this.la=f;this.tb=d;this.Za=k;this.pc=h;this.oc=l;this.v=!0;this.C={};this.Sa=
!0;this.P(a.La);this.ia=0}A(a,b);a.prototype.reset=function(a,c){this.fa(a,c);this.f=this.b=0};a.prototype.Z=function(a,c,b,d){var g=this.C[a];null==g?(g=new ma(d,c,b),this.C[a]=g):(g.$=c,g.ua=b,g.Qb=d)};a.prototype.Ea=function(a){if(a=this.C[a])a.Nb=!0};a.prototype.Kc=function(){this.C[a.V]=new ma(na,null,null)};a.prototype.wc=function(){delete this.C[a.V]};a.prototype.O=function(a,c){a.Ya==R?a instanceof S?this.bb=a.jc(this):this.ra(a):c==O?this.H=!0:c==N?this.S=!0:c==M&&(this.ba=!0)};a.prototype.Ta=
function(a){return this.ja?b.prototype.Ta.call(this,a):new oa(a,this)};a.prototype.ha=function(e,c,f){b.prototype.ha.call(this,e,c,f);var d=null,g=[],k;for(k in this.C){var h=this.C[k],l=!1;if(null!=h){var m=e.c.clientWidth,p=e.c.clientHeight;if(!h.ea&&!h.Xb){var n=h.Qb;e.hb(m,p);if(n==na)l=!0;else{var q=e.gb(h.$,h.ua);if(!h.Fc&&this.H&&(n==pa||n==T&&this.a.i>q.r))l=!0;else if(this.ba&&(n==qa||n==T&&h.$<m/2))l=!0;else if(this.S&&(n==ra||n==T&&h.$>=m/2))l=!0;else{this.Ma=Math.atan2(h.ua-p/2,h.$-m/
2);this.ia=0;if(n==sa||n==T&&!h.ea&&h.Nb)h.Xb=!0;h.Fc=!0}}}l?h.ea||(d=h):h.Xb&&(l=e.gb(h.$,h.ua),g.push(l),this.Ma=Math.atan2(h.ua-p/2,h.$-m/2),this.ia=0);h.Nb&&delete this.C[k]}}this.tb&&(h=this.a.Y(),f=this.tb.update(c,e,this.H,h,this.a.w(),this.da(),this.pa(h),g,f))&&(this.f+=f.r,this.b+=f.Kb);if(this.H){this.P(a.La);this.S?this.v=!0:this.ba&&(this.v=!1);k=this.v?-1:1;f=this.b;if(0<f&&this.v||0>f&&!this.v)f=0;f=Math.abs(f);this.b+=1/(1E3*(f*f*f*7E3+1))*k*c;d&&(this.Za(),this.f=this.la,d.ea=!0)}else{if(d)this.S?
(this.v=!0,this.f=this.la,this.b=-this.la,d.ea=!0,this.Za()):this.ba&&(this.v=!1,this.b=this.f=this.la,d.ea=!0,this.Za());else if(this.ba||this.S)d=this.S?.001:-.001,this.b+=d*c,-.15>this.f&&(this.f=Math.min(-.15,this.f+.02));if(0<this.f)for(k in this.C)if(h=this.C[k],null!=h&&h.ea){this.f+=4.5E-4*c;break}}this.S||this.ba?(this.P(a.pb),this.Jb||(this.H||this.oc(),this.Jb=!0)):(this.H||this.P(a.ob),this.Jb=!1);this.ba=this.S=this.H=!1;this.ia+=c;this.bb&&(this.pc(),e.Oc(this.bb),this.bb=null)};a.V=
-1;a.La="running";a.ob="jumping";a.pb="wall_sliding";return a}(L);function ma(b,a,e){this.Qb=b;this.$=a;this.ua=e}
var ta=function(b){function a(a,c,f,d,g,k,h,l,m){b.call(this,a,c,!0,f);this.Db=d;this.Yb=g;this.$b=k;this.yb=h;this.cb=l;this.Zb=m}A(a,b);a.prototype.ha=function(a){null!=this.Oa&&(this.b=this.Oa);if(this.H){var c=a.Dc(),b=!1;a=this.a;var d=a.Y();a=a.w();var g=Math.cos(a)*d,d=Math.sin(a)*d;null==this.Aa&&(this.Aa=g);null==this.eb&&(this.eb=d);var k;if(c&&0<c.length){var c=c[0].j.a,b=c.Y(),c=c.w(),h=Math.sin(c),c=Math.cos(c)*b;k=h*b;b=!0}else c=this.Aa,k=this.eb;var h=c-g,l=k-d,m=h*h+l*l;m>this.Db*
this.Db&&b?(c=this.Aa,h=c-g,l=c-d,m=h*h+l*l):(this.Aa=c,this.eb=k);g=Math.sqrt(m);a=I.rotate(h/g,l/g,-a);g=a.x;this.b+=a.y*this.Yb;this.b=Math.max(-this.yb,Math.min(this.yb,this.b));this.f=0>g?this.f+this.cb:this.f+(this.cb+(this.Zb-this.cb)*g)}this.kc=this.b;this.Oa=null;this.H=!1};a.prototype.O=function(a,b){a instanceof J?this.ra(a):b==M||b==N?this.Oa=-this.kc*this.$b:b==O&&(this.H=!0)};return a}(L),ua=function(){function b(a,b){this.j=a;this.Gc=b}b.prototype.u=function(a,b){this.Ia=a;this.Ha=
this.j.u(b-a);this.Pb=G.Lc(this.j.a,this.Ha.a)};return b}();
function va(b,a,e,c){return function(f,d,g,k,h,l,m){return function(p,n){for(var q=new V(b,n.o,.0014,a,e,6,n.B,n.g),r=g+n.g,t=0,u=l,w=0,z=Math.max(n.g,1),z=Math.max(1,Math.round(r/z)),D=0;t<r;){0!=t&&0==t%z&&(D+=Math.PI);for(var w=t+1,Q=Math.max(Math.min(n.g*Math.PI/48+Math.PI/8,Math.PI/w),(h+k)/u),B=0;B<w;){var y=new F(W),x;x=0==t?new G(k,0,l,2*Math.PI):new G(u,2*Math.PI*B/w+Q/2+D,k,(2*Math.PI-Q*w)/w);x.normalize();y.a=x;q.m(y);var y=c(x.l,x.A(),h,x.J,Math.min(n.g,n.g*t*2/r)),E;for(E in y)q.m(y[E]);
B++}w=h+k+t*(m+2*n.g);u+=w;t++}r=64/u;t=new S(function(a){return{o:a,B:f,g:n.g+d}});t.a=new G(u-w/2,Math.random()*Math.PI*2,64,r);t.a.normalize();q.m(t);n.o.reset(l+k+2,0);q.m(n.o);return q}}}function wa(b,a,e,c,f,d){function g(){var b=new ea(300,600,6,.1,1,e),b=new U(K,1,.4,b,c,a,f,d);b.fa(600,0,32,24);return b}return function(a,c){if(a==v)return null==c.o&&(c.o=g()),b[c.B](a,c);var e={o:g(),B:"1",g:1};return b[e.B](a,e)}}
function xa(b,a,e,c){return function(f,d,g,k,h,l,m){return function(p,n){var q=new V(b,n.o,.0014,a,e,6,n.B,n.g),r=new F(W);r.a=new G(k,0,m-k,2*Math.PI);q.m(r);for(r=g;0<r;){for(var t=0,u=Math.PI/g,w=2*Math.PI*r/g+u/2,z=m,D=l+n.g,Q={};t<D;){t++;var B=w,y=u;if(t==r||20*Math.random()<n.g){var x=new F(W),E=k/z;x.a=new G(z,w,h,E);x.a.normalize();q.m(x);B+=E;y-=E}if(D-t==r||20*Math.random()<n.g)x=new F(W),E=k/z,x.a=new G(z,w+u-E,h,E),x.a.normalize(),q.m(x),y-=E;z+=h;B=c(B,z+k,h,y,Math.min(n.g,t*n.g*2/D));
y=Q[t];null==y&&(y=0);100*Math.random()<n.g*(g-y)&&1<t&&(x=new F(W),x.a=new G(z,w+u,k,u),x.a.normalize(),q.m(x),y++,Q[t]=y);if(3<100*Math.random()){for(var Y in B)q.m(B[Y]);B=new F(W);B.a=new G(z,w,k,u);B.a.normalize();q.m(B)}z+=k}r--}D=(h+k)*D+m;Y=64/D;r=new S(function(a){return{o:a,B:f,g:n.g+d}});r.a=new G(D,Math.random()*Math.PI*2,64,Y);r.a.normalize();q.m(r);n.o.reset(m+2,0);q.m(n.o);return q}}}
function ya(b,a,e){return function(c,f,d,g,k,h){return function(l,m){var p=new V(b,m.o,.0014,a,e,6,m.B,m.g),n=0,q=new F(W);q.a=new G(1,0,g-1,2*Math.PI);p.m(q);for(q=Math.PI/d;n<d;){n++;var r=new F(W);r.a=new G(g,2*Math.PI*n/d-q,k,h/g);r.a.normalize();p.m(r)}n=64/g;q=new S(function(a){return{o:a,B:c,g:m.g+f}});q.a=new G(g,Math.PI,64,n);q.a.normalize();p.m(q);n=.22+.2*(Math.random()-.5);q=g+200+40*(Math.random()-.5);n=.22557467937469483;q=505.3551623225212;console.log("apx "+n);console.log("r "+q);
m.o.reset(q,0);m.o.b=n;p.m(m.o);return p}}}function za(b,a,e,c,f,d){var g=Aa(),k=Ba(),h=Ca("#FFFFAA","rgba(255, 255, 0, 0.7)");return function(l){return l instanceof ta?c:l instanceof ia?e:l instanceof ka?a:l instanceof la?g:l instanceof S?f:l instanceof U?k:l instanceof J?h:l instanceof ja?d:b}}
function Da(b){return function(a,e,c,f,d){for(var g=[],k=d*Math.random()*2;1<k;){var h=Math.random()*k%5,l;switch(Math.floor(h)){case 0:l=null;break;case 1:var m,p;d<10*Math.random()+1?(p=new ja(R,1,b,.5<Math.random()),m=32+2*d,l=28+1.9*d):(p=new la(R),m=22+d,l=22+d);p.fa(e,a+Math.random()*(f-l/e),m,l);l=p;break;case 2:l=new ka(R,1,b,.5<Math.random(),.06+.01*d,.3,e+c*Math.random()/2);l.fa(e+c/2,a+Math.random()*f,24+d,24+d);break;case 3:l=new ia(R,1,b,.05+.02*d,.5<Math.random(),.5<Math.random());l.fa(e,
a+Math.random()*f,30,30);break;case 4:m=new ta(R,1,b,200+30*d,.1,1.1,.1,.3,.65),l=Math.max(16,40-d*Math.random()),m.fa(e,a+Math.random()*f,l,l),l=m}null!=l&&g.push(l);k-=h}return g}}
var na=0,sa=1,pa=3,qa=4,ra=5,T=6,K=0,R=1,W=2,V=function(b){function a(a,c,f,d,g,k,h,l){var m=this;b.call(this,a);this.I=c;this.dc=f;this.h=d;this.lc=g;this.fc=k;this.L=h;this.aa=l;this.G=this.Qa=this.Pa=0;this.s=[];this.Gb=function(a){for(var b in a.changedTouches){var c=a.changedTouches.item(b);m.Z(c.identifier,c.clientX,c.clientY,!0)}a.stopPropagation()};this.ca=function(a){for(var b in a.changedTouches){var c=a.changedTouches.item(b);m.Ea(c.identifier)}a.stopPropagation()};this.Fb=function(a){for(var b in a.changedTouches){var c=
a.changedTouches.item(b);m.Z(c.identifier,c.clientX,c.clientY,!0)}a.stopPropagation()};var p=!1;this.zb=function(a){m.Z(0,a.clientX,a.clientY,!1);p=!0;a.stopPropagation()};this.Ab=function(a){p?m.Z(0,a.clientX,a.clientY,!1):m.Z(0,a.clientX,a.clientY,!1,!1);a.stopPropagation()};this.za=function(a){m.Ea(0);p=!1;a.stopPropagation()};var n={};this.ub=function(a){n[a.keyCode]||(n[a.keyCode]=!0,m.I.Kc());a.stopPropagation()};this.vb=function(a){if(n[a.keyCode]){delete n[a.keyCode];var b=!1,c;for(c in n)if(n[c]){b=
!0;break}b||m.I.wc()}a.stopPropagation()}}A(a,b);a.prototype.ib=function(){b.prototype.ib.call(this);var a=window.localStorage.getItem(this.aa+"-"+this.L);a&&(this.wa=parseInt(a))};a.prototype.Dc=function(){return this.s[K]};a.prototype.Jc=function(a,b){this.Qa=a;this.Pa=b};a.prototype.gb=function(a,b){var f=this.c.clientWidth,d=this.c.clientHeight,g=this.Qa,k=this.Pa,h=g*Math.cos(k),g=g*Math.sin(k),l=this.hb(f,d),f=I.rotate((a-f/2)*l,(b-d/2)*l,k+Math.PI/2),h=h+f.x,g=g+f.y;return new I(Math.sqrt(h*
h+g*g),Math.atan2(g,h))};a.prototype.Z=function(a,b,f,d,g){void 0===g&&(g=!0);this.I.K?g&&this.Ob({g:this.aa,B:this.L}):this.I.Z(a,b,f,d?T:g?sa:2)};a.prototype.Ea=function(a){this.I.Ea(a)};a.prototype.start=function(){b.prototype.start.call(this);var a=window.location.hash,c=this.aa+"-"+this.L;if(0==this.G){var f="s-"+c,d=parseInt(window.localStorage.getItem(f));d?d++:d=1;this.rb=d;window.localStorage.setItem(f,""+d);window.ga&&ga("send","pageview",{page:c})}c="#"+c;a!=c&&(c=window.location.href.substr(0,
window.location.href.length-a.length)+c,f={B:this.L,g:this.aa},null!=a&&""!=a?window.history.replaceState(f,this.L,c):window.history.pushState(f,this.L,c));"ontouchstart"in window||window.DocumentTouch?(this.c.addEventListener("touchstart",this.Gb),this.c.addEventListener("touchmove",this.Fb),this.c.addEventListener("touchend",this.ca),this.c.addEventListener("touchleave",this.ca),this.c.addEventListener("touchcancel",this.ca)):(this.c.addEventListener("mousedown",this.zb),this.c.addEventListener("mouseup",
this.za),this.c.addEventListener("mousemove",this.Ab),this.c.addEventListener("mouseout",this.za));window.addEventListener("keydown",this.ub);window.addEventListener("keyup",this.vb)};a.prototype.stop=function(){b.prototype.stop.call(this);this.c.removeEventListener("touchstart",this.Gb);this.c.removeEventListener("touchmove",this.Fb);this.c.removeEventListener("touchend",this.ca);this.c.removeEventListener("touchleave",this.ca);this.c.removeEventListener("touchcancel",this.ca);this.c.removeEventListener("mousedown",
this.zb);this.c.removeEventListener("mouseup",this.za);this.c.removeEventListener("mousemove",this.Ab);this.c.removeEventListener("mouseout",this.za);window.removeEventListener("keydown",this.ub);window.removeEventListener("keyup",this.vb)};a.prototype.m=function(a){for(var b=a.Ya;this.s.length<=b;)this.s.push([]);var b=this.s[b],f=this.lc(a);a=new ua(a,f);b.push(a);return a};a.prototype.update=function(a){this.I.K||this.I.ja||(this.G+=a);this.Nc(a);if(this.ma){var b=this.vc(a);this.Hc(a,b);this.qc()}};
a.prototype.Hc=function(a,b){for(var f=0;f<b.length;){var d=b[f],g=d.W.j,k=d.X.j,h=g.oa(),l=k.oa(),m,p;if(d.Ic||null==h&&null==l)p=m=X;else{var n=d.kb.Y(),q=g.da(),r=k.da(),t=g.pa(n),u=k.pa(n);p=r-q;var w=u-t;m=this.Lb(p,w,d.xc.a,d.kb);p=this.Lb(-p,-w,d.yc.a,d.kb);if(m==-p&&m!=X){m==P||m==O?null==h?k.ta(q):null==l?g.ta(r):(n=(r*l+q*h)/(h+l),k.ta(n),g.ta(n)):null==h?k.sa(t,n):null==l?g.sa(u,n):(h=(u*l+t*h)/(h+l),k.sa(h,n),g.sa(h,n));for(n=f+1;n<b.length;)h=b[n],h.W==d.W||h.W==d.X||h.X==d.W||h.X==d.X?
b.splice(n,1):n++;m==M?g.qa(!1):m==N&&g.qa(!0);p==M?k.qa(!1):p==N&&k.qa(!0);d.rc.apply(this);d.sc.apply(this);d.W.u(d.Fa,a);d.X.u(d.Fa,a);this.fb(a,b,d.W,this.s.length);this.fb(a,b,d.X,this.s.length)}else console.log("unmatched or undefined edges falling through!"),p=m=X}g.O(k,m);k.O(g,p);f++}};a.prototype.Lb=function(a,b,f,d){var g=d.Ac(f.i);f=d.zc(f.l);return(g?d.Sb():d.Ec())<d.F||g&&0>=a||!g&&0<=a?f?0<b?M:X:0>b?N:X:g?O:P};a.prototype.fb=function(a,b,f,d){var g=f.j;if(g.xa&&!g.K)for(;0<d;)if(d--,
d!=g.Ya)for(var k=this.s[d],h=k.length;0<h;){h--;var l=k[h],m=l.j;if(m.xa&&!m.K&&(l=this.uc(a,f,l),null!=l)){for(m=0;m<b.length&&!(b[m].Fa>l.Fa);)m++;b.splice(m,0,l)}}};a.prototype.vc=function(a){for(var b=[],f=this.s.length;0<f;){f--;for(var d=this.s[f],g=d.length;0<g;)g--,this.fb(a,b,d[g],f)}return b};a.prototype.Mb=function(a,b){var f=1;if(b.j.Sa)for(var d=!1;!d;)b.j.u(a/f).a.lb(b.j.a)?d=!0:f++;return f};a.prototype.uc=function(a,b,f){var d=b.Ha,g=f.Ha;if(null!=d&&null!=g){var k=b.j,h=f.j,l,m,
p;if(b.Pb.lb(f.Pb)){var n=this.Mb(a,b),q=this.Mb(a,f),n=Math.max(n,q);if(1<n)for(q=1,d=null;q<=n;){var r=a*q/n,t=k.u(r),u=h.u(r),d=G.Ga(t.a,u.a);if(null!=d){m=t;p=u;l=r;break}q++}else m=d,p=g,l=a,d=G.Ga(m.a,p.a)}else d=null;if(null!=d)if(b.j.jb()||f.j.jb()||b.j.a.lb(f.j.a))b=new ha(!0,a,d,b,m,p,f,g,g);else{a=0;g=Math.max(b.Ia,f.Ia);k=d;for(d=h=null;a<this.fc;)n=(g+l)/2,q=b.j.u(n),r=f.j.u(n),t=G.Ga(q.a,r.a),null!=t?(l=n,k=t,m=q,p=r):(g=n,h=q,d=r),a++;null==h&&null==d&&(h=b.j.u(g-b.Ia),d=f.j.u(g-f.Ia));
b=new ha(!1,g,k,b,h,m,f,d,p)}else b=null}else b=null;return b};a.prototype.Nc=function(a){var b=[],f;for(f in this.s)for(var d=this.s[f],g=d.length;0<g;){g--;var k=d[g],h=k.j;h.update(this,a,b);h.K?d.splice(g,1):k.u(0,a)}for(f in b)d=b[f],g=this.m(d),d.update(this,a,b),g.u(0,a)};a.prototype.qc=function(){for(var a in this.s){var b=this.s[a],f;for(f in b){var d=b[f].Ha;null!=d&&d.apply(this)}}};a.prototype.toTimeString=function(a){var b=Math.floor(a/1E3);a=Math.floor(b/60);for(b=""+b%60;2>b.length;)b=
"0"+b;return a+":"+b};a.prototype.hb=function(a,b){return Math.min(1,a/600,b/500)};a.prototype.Ub=function(){var a=this.c.clientWidth,b=this.c.clientHeight,f=Math.floor(Math.min(b/20,a/20));this.h.font="bold "+f+"px Courier";this.h.fillStyle="#000000";this.h.fillRect(0,0,a,b);this.h.save();var d=this.Qa,g=this.Pa,k=-d*Math.cos(g),d=-d*Math.sin(g),h=this.hb(a,b);this.h.translate(a/2,b/2);this.h.rotate(-g-Math.PI/2);this.h.scale(h,h);this.h.translate(k,d);for(g=this.s.length;0<g;)for(g--,k=this.s[g],
d=k.length;0<d;){d--;var l=k[d],h=l.j;h.K||(l=l.Gc,l(this.h,h))}this.h.restore();this.h.fillStyle="#FFFFFF";g=""+this.aa+"-"+this.L;this.h.fillText(g+" "+this.toTimeString(this.G),f,1.5*f);var m;this.wa?m="BEST "+this.toTimeString(this.wa):m="Unbeaten!";this.h.fillText(m,a-this.h.measureText(m).width-f,f+f/2);f=Math.floor(Math.min(b/15,a/15));this.h.font="bold "+f+"px Courier";this.rb&&2E3>this.G&&(1E3<this.G&&(this.h.globalAlpha=2*(2E3-this.G)/2E3),m="World "+g,g=this.h.measureText(m),this.h.fillText(m,
(a-g.width)/2,(b+f)/2-f),m="Attempt "+this.rb,g=this.h.measureText(m),this.h.fillText(m,(a-g.width)/2,(b+f)/2+1.5*f),this.h.globalAlpha=1);if(this.I.K||this.I.ja)m="GAME OVER",g=this.h.measureText(m),this.h.fillText(m,(a-g.width)/2,(b+f)/2)};a.prototype.Oc=function(a){(null==this.wa||this.wa>this.G)&&window.localStorage.setItem(this.aa+"-"+this.L,""+this.G);this.Ob(a)};return a}(ba),oa=function(b){function a(a,c){b.call(this,a,c)}A(a,b);a.prototype.apply=function(a){b.prototype.apply.call(this,a);
var c=this.a;a.Jc(c.A(),c.w())};return a}(C),ca=function(){function b(a,b,c,f){this.Ua=a;this.Va=b;this.a=c;this.Wa=f}b.prototype.apply=function(){this.Wa.Vb(this.Ua,this.Va)};return b}(),G=function(){function b(a,b,c,f){this.i=a;this.l=b;this.F=c;this.J=f}b.Qc=function(a,b){for(;b>a+Math.PI;)b-=2*Math.PI;for(;b<a-Math.PI;)b+=2*Math.PI;return b>a};b.V=function(a){for(;0>a;)a+=2*Math.PI;return a%(2*Math.PI)};b.Ga=function(a,e){var c=a.Tb(),f=e.Tb(),d;for(d in c){var g=c[d],k;for(k in f){var h=b.tc(g,
f[k]);if(null!=h)return h.normalize(),h}}return null};b.tc=function(a,e){var c=a.A(),f=a.l,d=a.D(),g=e.A(),k=e.l,h=e.D(),l=Math.max(a.i,e.i),c=Math.min(c,g)-l;return 0<c?(f=Math.max(f,k),d=Math.min(d,h)-f,0<d?new b(l,f,c,d):null):null};b.Lc=function(a,e){var c=Math.min(a.i,e.i),f=Math.min(a.l,e.l),d=Math.max(a.A(),e.A()),g=Math.max(a.D(),e.D());return new b(c,f,d-c,g-f)};b.prototype.Ac=function(a){return this.i<=a&&this.i+this.F>a};b.prototype.zc=function(a){a=b.V(a);return this.l<=a&&this.l+this.J>
a};b.prototype.A=function(){return this.i+this.F};b.prototype.Y=function(){return this.i+this.F/2};b.prototype.D=function(){return this.l+this.J};b.prototype.w=function(){return this.l+this.J/2};b.prototype.Sb=function(){return this.A()*this.J};b.prototype.Ec=function(){return this.i*this.J};b.prototype.normalize=function(){this.l=b.V(this.l)};b.prototype.Tb=function(){var a=[this];this.D()>2*Math.PI&&a.push(new b(this.i,this.l-2*Math.PI,this.F,this.J));return a};b.prototype.lb=function(a){return null!=
b.Ga(this,a)};return b}(),P=-1,M=-2,O=1,N=2,X=0,I=function(){function b(a,b){this.r=a;this.Kb=b}b.Rb=function(a,b){return{x:Math.cos(b)*a,y:Math.sin(b)*a}};b.gb=function(a,e){return new b(Math.sqrt(a*a+e*e),Math.atan2(e,a))};b.rotate=function(a,b,c){var f=Math.sin(c);c=Math.cos(c);return{x:a*c-b*f,y:a*f+b*c}};return b}();
function Ea(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var c=e.a,f=e.N%3E3,f=Math.abs(f-1500),d=1+f/3E3,f=2-f/1500,g=c.w(),k=c.l,k=g+(k-g)*d,h=Math.sin(k),k=Math.cos(k),l=c.D(),l=g+(l-g)*d,d=Math.sin(l),l=Math.cos(l),m=Math.sin(g),g=Math.cos(g),p=c.Y(),n=c.i,n=p+(n-p)*f,c=c.A(),c=p+(c-p)*f;0<n&&(a.beginPath(),a.moveTo(k*p,h*p),a.lineTo(g*n,m*n),a.lineTo(l*p,d*p),a.lineTo(g*c,m*c),a.closePath(),a.fill(),a.stroke())}}
function Fa(b){return function(a,e){var c=e.a,f=c.i;if(0<f){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var d=e.N%1E3,d=Math.abs(d-500),d=Math.PI/4*(d/1E3),g=c.w(),k=Math.cos(g)*f,h=Math.sin(g)*f,f=c.F,g=f/5,l=f+g/2,c=c.w()+Math.PI/2;a.save();a.translate(k,h);k=function(a,b,c,d){for(d=d?-c/2:c/2;b>c;)b-=c,a.lineTo(d,-(b+c/2)),a.lineTo(0,-b)};h=e.cc?-1:1;a.save();a.rotate(-d*h+c);a.scale(h,1);a.beginPath();a.moveTo(0,0);a.arc(0,-f/2,f/2,Math.PI/2,-Math.PI/2,!1);k(a,f,g,!0);a.restore();a.save();
a.rotate(d*h+c);a.scale(h,1);a.arc(0,-l/2,l/2,Math.PI/2,-Math.PI/2,!0);k(a,l,g,!1);a.closePath();a.restore();a.restore();a.fill();a.stroke()}}}
function Ga(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;for(var c=e.a,f=e.N%500/1500,d=1/3,g=0;3>g;){var k=f+d*g;g++;a.globalAlpha=Math.max(0,1-k*k);var h=c.J,l=c.w(),m=l-h*k,h=l+h*k,l=Math.sin(m),p=Math.cos(m),n=Math.sin(h),q=Math.cos(h),r=c.Y(),t=c.F,u=r-t*k,k=r+t*k;0<u&&(a.beginPath(),a.moveTo(p*k,l*k),a.arc(0,0,k,m,h,!1),a.lineTo(q*u,n*u),a.arc(0,0,u,h,m,!0),a.closePath(),a.stroke())}a.globalAlpha=1}}
function Ha(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var c=e.a,f=c.w(),d=e.N,g;g=200>d?d/200:1;var k=c.l,k=f+(k-f)*g,d=Math.sin(k),k=Math.cos(k),h=c.D(),h=f+(h-f)*g,f=Math.sin(h);g=Math.cos(h);h=c.i;c=c.A();0<h&&(a.beginPath(),a.moveTo(k*c,d*c),a.lineTo(k*h,d*h),a.lineTo(g*h,f*h),a.lineTo(g*c,f*c),a.closePath(),a.fill(),a.stroke())}}
function Ia(b){return function(a,e){a.strokeStyle="#FFFFFF";a.fillStyle=b;a.lineWidth=2;var c=e.a,f=c.l,d=Math.sin(f),g=Math.cos(f),k=c.D(),h=Math.sin(k),l=Math.cos(k),m=c.i,c=c.A();0<m&&(a.beginPath(),a.moveTo(g*c,d*c),a.arc(0,0,c,f,k,!1),a.lineTo(l*m,h*m),a.arc(0,0,m,k,f,!0),a.closePath(),a.fill(),a.stroke())}}
function Ba(){return function(b,a){b.strokeStyle="#FFFFFF";b.fillStyle="rgba(255, 0, 0, 1)";b.lineWidth=2;var e=a.a,c=e.i;if(0<c){var f=e.w(),d=Math.cos(f)*c,g=Math.sin(f)*c,k=e.Sb(),h=e.F,l,m=a.M,p=a.N;m==U.La&&1E-4<Math.abs(a.b)?(e=300/Math.abs(a.b),c=p%e,c>e/2&&(c=e-c),l=2*c/e):l=0;var n=.2*k,q=.2*k,e=.2*k,c=.3*k;m==U.nb&&(f+=p*Math.PI*2/500);b.save();b.translate(d,g);b.rotate(f+Math.PI/2);a.v&&b.scale(-1,1);f=(k/2-n)*l+n;d=k-f-k/2;f-=k/2;p=m==U.ob?Math.PI/6*Math.min(1,p/200):0;b.save();b.translate(f,
-q);b.rotate(p);b.beginPath();b.moveTo(-n/2,2*-q);b.lineTo(-n/2,q);b.lineTo(n/2,q);b.lineTo(n/2,-q);b.fill();b.stroke();b.restore();b.save();b.translate(d,-q);b.rotate(-p);b.beginPath();b.moveTo(-n/2,-q);b.lineTo(-n/2,q);b.lineTo(n/2,q);b.lineTo(n/2,-q);b.fill();b.stroke();b.restore();b.beginPath();b.moveTo(-k/2,-h);b.lineTo(-k/2,-q);b.lineTo(k/2,-q);b.lineTo(k/2,-h);b.closePath();b.fill();b.stroke();f=.75*-h;d=.1*k;g=.1*-k+2*d*(1+l);p=g-1.5*d;g+=1.5*d;b.fillStyle="#FFFFFF";b.save();b.translate(p,
f);b.scale(1,1.4);b.beginPath();b.arc(0,0,d,0,2*Math.PI);b.fill();b.restore();m==U.pb?(b.moveTo(g-d,f),b.lineTo(g+d,f),b.stroke()):(b.save(),b.translate(g,f),b.scale(1,1.2),b.beginPath(),b.arc(0,0,d,0,2*Math.PI),b.fill(),b.restore());k=.25*-k;h=.55*-h;l=(1-l)*(a.v?-Math.PI/3:Math.PI/3);null!=a.Ma&&200>a.ia&&(l=-a.Ma+Math.PI/2);b.save();b.translate(k,h);a.v?b.rotate(l):b.rotate(-l);((k=l<Math.PI&&0<l)&&a.v||!k&&!a.v)&&b.scale(-1,1);k=2*e;h=3*e;b.beginPath();b.moveTo(k/2,c-e/2);b.lineTo(k/2,c-e/2+h);
b.lineTo(k/2-e,c-e/2+h);b.lineTo(k/2-e,c-e/2+e);b.lineTo(-k/2,c-e/2+e);b.lineTo(-k/2,c-e/2);b.closePath();b.fillStyle="rgba(128, 128, 0, 1)";b.fill();b.stroke();b.beginPath();b.moveTo(e/2,0);b.lineTo(e/2,c-e/2);b.bezierCurveTo(e/2,c,-e/2,c,-e/2,c-e/2);b.lineTo(-e/2,0);b.fillStyle="rgba(255, 0, 0, 1)";b.fill();b.stroke();b.restore();b.restore()}}}
function Ca(b,a){return function(e,c){e.strokeStyle=b;e.fillStyle=a;e.lineWidth=2;var f=c.a,d=f.w(),g=Math.cos(f.l),k=Math.sin(d),d=Math.cos(d),h=f.Y(),l=f.A();0<f.i&&(f=Math.max(Math.abs(g*h-d*h),Math.abs(l-h)),e.beginPath(),e.arc(d*h,k*h,f,0,2*Math.PI),e.closePath(),e.fill(),e.stroke())}}
function Aa(){return function(b,a){b.strokeStyle="#FFFFFF";b.fillStyle="rgba(255, 255, 255, 0.8)";b.lineWidth=2;var e=a.a,c=e.l,f=Math.sin(c),d=Math.cos(c),g=e.D(),k=Math.sin(g),h=Math.cos(g),l=e.w(),m=Math.sin(l),l=Math.cos(l),p=e.i,n=e.A();0<p&&(b.beginPath(),b.moveTo(d*p,f*p),b.lineTo(l*(n+e.F/2),m*n),b.lineTo(h*p,k*p),b.arc(0,0,p,g,c,!0),b.closePath(),b.fill(),b.stroke())}}
function Ja(b,a){for(var e=.35*b.sampleRate,c=b.createBuffer(1,e,b.sampleRate),f=c.getChannelData(0),d=0;d<e;d++)f[d]=2*Math.random()-1;return function(){var d=b.currentTime,f=.35+.1*(Math.random()-.5),e=b.createBufferSource();e.buffer=c;e.loop=!0;var l=b.createBiquadFilter();l.type="lowpass";l.Q.value=1;l.frequency.value=600+200*Math.random();var m=b.createGain();m.gain.value=0;m.gain.setValueAtTime(0,d);m.gain.linearRampToValueAtTime(.4+.1*Math.random(),d+.002*f);m.gain.linearRampToValueAtTime(.1+
.05*Math.random(),d+.2*f+.05*Math.random());m.gain.linearRampToValueAtTime(0,d+f);e.connect(l);l.connect(m);m.connect(b.destination);setTimeout(function(){l.disconnect();e.disconnect();e.stop()},1E3*f);e.start();a&&a()}}
function Z(b,a,e,c,f,d,g,k,h,l){void 0===l&&(l=1);return function(){var m=b.currentTime,p=b.createOscillator();p.frequency.setValueAtTime(Math.max(1,e+Math.random()*f),m);p.frequency.linearRampToValueAtTime(Math.max(1,c+Math.random()*f),m+h);p.type=a;var n=b.createGain();n.gain.value=0;n.gain.setValueAtTime(0,m);n.gain.linearRampToValueAtTime(.2*l,m+d);n.gain.linearRampToValueAtTime(.1*l,m+g);n.gain.linearRampToValueAtTime(.1*l,m+k);n.gain.linearRampToValueAtTime(0,m+h);p.connect(n);n.connect(b.destination);
p.start();setTimeout(function(){p.stop()},1E3*h)}}
function Ka(b,a,e,c,f){return function(){var d=b.currentTime,g=b.createOscillator();g.frequency.setValueAtTime(a,d);g.frequency.linearRampToValueAtTime(e,d+f);g.type="square";g.start();var k=b.createGain();k.gain.value=0;k.gain.setValueAtTime(.2,d);k.gain.linearRampToValueAtTime(.1,d+.1*f);k.gain.linearRampToValueAtTime(.1,d+.2*f);k.gain.linearRampToValueAtTime(0,d+f);var h=b.createOscillator();h.frequency.value=c/f;h.type="sawtooth";h.start();var l=b.createGain();l.gain.value=-1E3;g.connect(k);h.connect(l);
l.connect(g.detune);k.connect(b.destination);setTimeout(function(){g.disconnect();k.disconnect();l.disconnect();g.stop();h.stop()},1E3*f)}}var v=1;
window.onload=function(){function b(){var a=window.location.hash,b;if(a)if(a=a.substr(1),localStorage.getItem("s-"+a)){var c=a.split("-"),a=parseInt(c[0]),c=c[1];a&&c&&(b={o:null,g:a,B:c},t=v)}else b=null;return b}function a(a,b){a.addColorStop(0,"rgba(0, 0, 0, "+b+")");a.addColorStop(.2,"rgba(255, 0, 255, "+b+")");a.addColorStop(.32,"rgba(255, 0, 0, "+b+")");a.addColorStop(.44,"rgba(255, 255, 0, "+b+")");a.addColorStop(.56,"rgba(0, 255, 0, "+b+")");a.addColorStop(.68,"rgba(0, 255, 255, "+b+")");
a.addColorStop(.8,"rgba(0, 0, 255, "+b+")");a.addColorStop(.92,"rgba(255, 255, 255, 0.7)");a.addColorStop(1,"rgba(255, 255, 255, 0)")}var e=document.getElementById("canvas"),c;window.AudioContext?c=new AudioContext:window.webkitAudioContext&&(c=new webkitAudioContext);var f=Z(c,"sawtooth",250,1E3,200,.01,.08,.12,.3),d=Ja(c,Z(c,"square",600,100,100,0,.035,.04,.2,.6)),g=Ka(c,200,10,6,.7),k=Z(c,"square",250,-150,100,0,.05,.1,.2,.5),h=Z(c,"sawtooth",150,-100,100,.01,.05,.1,.3);c=Ka(c,600,1E3,14,.8);e.setAttribute("width",
""+document.body.clientWidth+"px");e.setAttribute("height",""+document.body.clientHeight+"px");var l=e.getContext("2d"),m=l.createRadialGradient(0,0,0,0,0,1500);a(m,.5);var p=l.createRadialGradient(0,0,200,0,0,1700);a(p,.75);var m=za(Ia(m),Ha(p),Ea(p),Ca("#FFFFFF",p),Ga(p),Fa(p)),h=Da(h),p=xa(e,l,m,h),n=ya(e,l,m),q={};q["1"]=va(e,l,m,h)("2",0,6,20,70,300,5);q["2"]=p("1",1,8,20,100,6,300);q["3"]=n("1",1,8,300,300,10);var r=new fa(wa(q,f,d,g,c,k)),e=b(),t;null==e?t=0:window.history.replaceState(null,
null,window.location.href.substr(0,window.location.href.length-window.location.hash.length));r.Ka(t,e);window.onpopstate=function(a){a=a.state;null==a&&(a=b());a?r.Ka(v,a):r.Ka(0,null)}};
